(function(e){function t(t){for(var s,r,c=t[0],l=t[1],o=t[2],v=0,d=[];v<c.length;v++)r=c[v],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,c=1;c<a.length;c++){var l=a[c];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"036d":function(e,t,a){},"0849":function(e,t,a){"use strict";a("ca30")},"0a56":function(e,t,a){},"19d4":function(e,t,a){e.exports=a.p+"img/shebei4.e34cbebf.png"},"1d8f":function(e,t,a){"use strict";a("ea29")},3149:function(e,t,a){},"43e9":function(e,t,a){"use strict";a("036d")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("Shigonghuifang")],1)},i=[],r=a("e1e6"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shigongjiankong"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("时间段")]),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.searchParams.time,callback:function(t){e.$set(e.searchParams,"time",t)},expression:"searchParams.time"}})],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("工程项目名称:")]),a("el-select",{model:{value:e.searchParams.project,callback:function(t){e.$set(e.searchParams,"project",t)},expression:"searchParams.project"}},e._l(e.selectProjectList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("类型:")]),a("el-select",{on:{change:e.f_searchType},model:{value:e.searchParams.type,callback:function(t){e.$set(e.searchParams,"type",t)},expression:"searchParams.type"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"摊铺",value:"1"}}),a("el-option",{attrs:{label:"碾压",value:"2"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("绘制模式:")]),a("el-select",{model:{value:e.searchParams.mode,callback:function(t){e.$set(e.searchParams,"mode",t)},expression:"searchParams.mode"}},[a("el-option",{attrs:{label:"正常",value:"normal"}}),a("el-option",{attrs:{label:"快速",value:"fast"}})],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("参数:")]),a("el-select",{model:{value:e.searchParams.argv,callback:function(t){e.$set(e.searchParams,"argv",t)},expression:"searchParams.argv"}},[a("el-option",{attrs:{label:"速度",value:"speed"}}),a("el-option",{attrs:{label:"温度",value:"temperature"}}),a("el-option",{attrs:{label:"遍数",value:"count"}}),1!=e.searchParams.type?a("el-option",{attrs:{label:"振动",value:"vibrate"}}):e._e()],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("中心设备:")]),a("el-select",{model:{value:e.searchParams.equipment,callback:function(t){e.$set(e.searchParams,"equipment",t)},expression:"searchParams.equipment"}},e._l(e.selectEquipment,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.f_search}},[e._v("查询")])],1),a("div",{staticClass:"shigongjiankong_content"},[a("div",{staticClass:"left"},[a("Legend",{attrs:{mode:e.searchParams.argv}}),a("div",{ref:"stage",staticClass:"stage"}),a("div",{ref:"map",staticClass:"map"})],1),a("div",{staticClass:"right"},[a("div",{staticClass:"weather"},[a("div",{staticClass:"weather_title"},[e._v("气象信息")]),a("div",{staticClass:"weather_content"},[a("div",{staticClass:"item"},[a("div",{staticClass:"count"},[e._v(" "+e._s(e.weather.shidu||"...")+" ")]),a("div",{staticClass:"title"},[e._v(" 湿度 ")]),a("div",{staticClass:"fengsu",staticStyle:{opacity:"0"}},[e._v(" 风速: "+e._s(e.weather.fengsu||"...")+" km/h ")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"count"},[e._v(" "+e._s(e.weather.wendu||"...")+" "),a("span",{staticClass:"unit"})]),a("div",{staticClass:"title"},[e._v("温度")]),a("div",{staticClass:"fengsu"},[e._v("风速: "+e._s(e.weather.fengsu||"...")+" km/h")])])])]),a("div",{staticClass:"equipment"},[a("div",{staticClass:"equipment_title"},[e._v("作业设备")]),e._l(e.machineList,(function(t,s){return a("div",{key:s,staticClass:"equipment_item"},[a("img",{attrs:{src:"摊铺机"===t.type?e.tanpuji:e.yaluji}}),a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("设备编号：")]),a("div",{staticClass:"value"},[e._v(" "+e._s(t.code)+" ")])]),a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("设备名称：")]),a("div",{staticClass:"value"},[e._v(" "+e._s(t.name)+" ")])]),a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("温度：")]),a("div",{staticClass:"value"},[e._v(" "+e._s(e.currentPath.temperature)+" ")])]),a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("速度：")]),a("div",{staticClass:"value"},[e._v(" "+e._s(e.currentPath.speed)+" ")])]),e._m(0,!0)])}))],2)])])],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("状态：")]),a("div",{staticClass:"value"},[e._v(" -- ")])])}],o=a("ade3"),u=(a("d81d"),a("4de4"),a("7db0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"legend"},[a("div",{staticClass:"title"},[e._v(e._s(e.title))]),"count"===e.mode?a("Count"):"speed"===e.mode?a("Speed"):"temperature"===e.mode?a("Temperature"):a("Vibrate")],1)}),v=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"count"},[a("div",{staticClass:"count_title_ves"},e._l(10,(function(t){return a("div",{key:t,staticClass:"count_title"},[e._v(e._s(t))])})),0),a("div",{staticClass:"count_item_ves"},e._l(10,(function(e){return a("div",{key:e,staticClass:"count_item"})})),0)])},p=[],m=Object(r["c"])({setup:function(){}}),h=m,f=(a("0849"),a("2877")),b=Object(f["a"])(h,d,p,!1,null,"916d1d06",null),_=b.exports,g=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"speed"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[e._v("0+")]),a("div",{staticClass:"content"})]),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[e._v("10+")]),a("div",{staticClass:"content"})])])}],x=Object(r["c"])({setup:function(){}}),y=x,M=(a("b0d5"),Object(f["a"])(y,g,C,!1,null,"2ad682bc",null)),j=M.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"temperature"},[a("div",{staticClass:"temperature_title_ves"},e._l(10,(function(t){return a("div",{key:t,staticClass:"temperature_title"},[e._v(" "+e._s(t)+" ")])})),0),a("div",{staticClass:"temperature_item_ves"},e._l(10,(function(e){return a("div",{key:e,staticClass:"temperature_item"})})),0)])},w=[],P=Object(r["c"])({setup:function(){}}),q=P,O=(a("43e9"),Object(f["a"])(q,k,w,!1,null,"7c80eff4",null)),E=O.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vibrate"},[a("div",{staticClass:"vibrate_title_ves"},e._l(10,(function(t){return a("div",{key:t,staticClass:"vibrate_title"},[e._v(e._s(t))])})),0),a("div",{staticClass:"vibrate_item_ves"},e._l(10,(function(e){return a("div",{key:e,staticClass:"vibrate_item"})})),0)])},S=[],L=Object(r["c"])({setup:function(){}}),T=L,Y=(a("9a63"),Object(f["a"])(T,I,S,!1,null,"0251fc9d",null)),X=Y.exports,W=Object(r["c"])({components:{Count:_,Speed:j,Vibrate:X,Temperature:E},props:{mode:{type:String}},setup:function(e,t){var a={count:"遍",speed:"速度",vibrate:"振动"},s=Object(r["a"])((function(){return a[e.mode]}));return{title:s}}}),z=W,D=(a("bb03"),Object(f["a"])(z,u,v,!1,null,"18020fab",null)),A=D.exports,F=a("79ba"),J=a.n(F),B=(a("d3b7"),function(e,t){return new Promise((function(a,s){$.get({url:"http://test.zgdrkj.cn:8081"+e,data:t,success:function(e){a(e)},error:function(e){s(e)}})}))}),N=function(){return B("/CjManager/sysConstruction/getProjectList1",{customId:"",zhandianId:5})},Z=function(e){return B("/CjManager/sysConstruction/getSbList",{projectId:e})},G=function(e){return B("/CjManager/sysConstruction/getLocation2",e)},H=function(e){return B("/CjManager/sysConstruction/getWeather",e)},K=Object(r["c"])({components:{Legend:A},setup:function(e,t){var s;Object(r["d"])((function(){s=new BMap.Map(t.refs.map),s.centerAndZoom("沧州",17)}));var n,i=Object(r["e"])({temperature:0,speed:0,status:"--"}),c=Object(r["e"])([]),l=Object(r["e"])([]),u=Object(r["e"])({project:464,equipment:"90ffa6e6-7e19-497c-bb4f-e2cee5f026f1",mode:"fast",type:"2",argv:"count",time:["2021-03-10 18:30:00","2021-09-13 23:00:00"]}),v=function(){u.value.argv="count"},d=Object(r["a"])((function(){return l.value.filter((function(e){return e.code===u.value.equipment}))})),p=function(){Z(u.value.project).then((function(e){0===e.code&&(l.value=e.data)}))};N().then((function(e){0===e.code&&(c.value=e.data)})),Object(r["f"])((function(){return u.value.project}),(function(){p()}),{immediate:!0}),Object(r["d"])((function(){var e=t.refs.stage,a=function(){var t=e.offsetWidth,a=.52*t;e.style.height=a+"px"};a(),n=new J.a(e),window.addEventListener("resize",a,!1)}));var m=null,h=Object(r["e"])({}),f=function(){var e,t=this,a={1:"摊铺机",2:"压路机"},r=(e={},Object(o["a"])(e,"sbCodes[]",u.value.equipment),Object(o["a"])(e,"projectId",u.value.project),Object(o["a"])(e,"startTime",u.value.time[0]),Object(o["a"])(e,"endTime",u.value.time[1]),Object(o["a"])(e,"sbType",a[u.value.type]),e);for(var c in n.reset(),clearInterval(m),r)if(!r[c])return this.$message.closeAll(),this.$message("请勾选所有筛选项");H({projectId:u.value.project}).then((function(e){console.log(e),h.value.shidu=e.data.hj_shidu,h.value.wendu=e.data.hj_wendu,h.value.fengsu=e.data.hj_fengsu})),G(r).then((function(e){if(0===e.code){var a=e.data;if(!a||0===a.length)return t.$message({type:"error",message:"当前筛选条件下没有数据"});var r=l.value.find((function(e){return e.code===u.value.equipment}));n.createMachine(u.value.equipment,r.type,u.value.argv);var c=0;if(0===a.length)return;m=setInterval((function(){var e=a[c];i.value.temperature=e.temperature,i.value.speed=e.speed,n.createPath({id:e.sb_code,lat:e.latitude,lng:e.longitude,temperature:e.temperature,speed:e.speed,vibrate:e.vibrate_max,stakemark:e.stakemark,evennumber:e.evennumber}),s.centerAndZoom({lat:e.latitude,lng:e.longitude},17),c++,c>a.length-1&&clearInterval(m)}),"normal"===u.value.mode?1e3:16)}}))};return{currentPath:i,selectProjectList:c,searchParams:u,selectEquipment:l,machineList:d,f_search:f,f_searchType:v,tanpuji:a("19d4"),yaluji:a("b332"),weather:h}}}),R=K,V=(a("1d8f"),Object(f["a"])(R,c,l,!1,null,"b360781e",null)),Q=V.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shigongjiankong"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("工程项目名称:")]),a("el-select",{model:{value:e.searchParams.project,callback:function(t){e.$set(e.searchParams,"project",t)},expression:"searchParams.project"}},e._l(e.selectProjectList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("类型:")]),a("el-select",{model:{value:e.searchParams.type,callback:function(t){e.$set(e.searchParams,"type",t)},expression:"searchParams.type"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"摊铺",value:"1"}}),a("el-option",{attrs:{label:"碾压",value:"2"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("绘制模式:")]),a("el-select",{model:{value:e.searchParams.mode,callback:function(t){e.$set(e.searchParams,"mode",t)},expression:"searchParams.mode"}},[a("el-option",{attrs:{label:"正常",value:"normal"}}),a("el-option",{attrs:{label:"快速",value:"fast"}})],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("参数:")]),a("el-select",{model:{value:e.searchParams.argv,callback:function(t){e.$set(e.searchParams,"argv",t)},expression:"searchParams.argv"}},[a("el-option",{attrs:{label:"遍数",value:"count"}}),a("el-option",{attrs:{label:"速度",value:"speed"}}),a("el-option",{attrs:{label:"振动",value:"vibrate"}})],1)],1),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"label"},[e._v("中心设备:")]),a("el-select",{model:{value:e.searchParams.equipment,callback:function(t){e.$set(e.searchParams,"equipment",t)},expression:"searchParams.equipment"}},e._l(e.selectEquipment,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})})),1)],1)],1),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.f_search}},[e._v("查询")])],1),a("div",{staticClass:"shigongjiankong_content"},[a("div",{staticClass:"left"},[a("Legend",{attrs:{mode:e.searchParams.argv}}),a("div",{ref:"stage",staticClass:"stage"}),a("div",{ref:"map",staticClass:"map"})],1),a("div",{staticClass:"right"},[e._m(0),a("div",{staticClass:"equipment"},[a("div",{staticClass:"equipment_title"},[e._v("作业设备")]),e._l(e.machineList,(function(t,s){return a("div",{key:s,staticClass:"equipment_item"},[a("img",{attrs:{src:"摊铺机"===t.type?"/shebei3.png":"/shebei4.png"}}),a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("设备编号：")]),a("div",{staticClass:"value"},[e._v(" "+e._s(t.code)+" ")])]),a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("设备名称：")]),a("div",{staticClass:"value"},[e._v(" "+e._s(t.name)+" ")])]),e._m(1,!0),e._m(2,!0),e._m(3,!0)])}))],2)])])],1)},ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"weather"},[a("div",{staticClass:"weather_title"},[e._v("气象信息")]),a("div",{staticClass:"weather_content"},[a("div",{staticClass:"item"},[e._v("湿度")]),a("div",{staticClass:"item"},[e._v(" 温度 ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("温度：")]),a("div",{staticClass:"value"},[e._v(" -- ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("速度：")]),a("div",{staticClass:"value"},[e._v(" -- ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"equipment_item_line"},[a("div",{staticClass:"equipment_item_line_title"},[e._v("状态：")]),a("div",{staticClass:"value"},[e._v(" -- ")])])}],te=Object(r["c"])({components:{Legend:A},setup:function(e,t){var a,s;Object(r["d"])((function(){a=new BMap.Map(t.refs.map),a.centerAndZoom("沧州",17)}));var n=Object(r["e"])([]),i=Object(r["e"])([]),c=Object(r["e"])({project:366,equipment:"90ffa6e6-7e19-497c-bb4f-e2cee5f026f2",mode:"normal",type:"1",argv:"count",time:["2021-08-10 18:30:00","2021-08-10 23:00:00"]}),l=Object(r["a"])((function(){return i.value.filter((function(e){return e.code===c.value.equipment}))})),u=function(){Z(c.value.project).then((function(e){0===e.code&&(i.value=e.data)}))};N().then((function(e){0===e.code&&(n.value=e.data)})),Object(r["f"])((function(){return c.value.project}),(function(){u()}),{immediate:!0}),Object(r["d"])((function(){var e=t.refs.stage,a=function(){var t=e.offsetWidth,a=.52*t;e.style.height=a+"px"};a(),s=new J.a(e),window.addEventListener("resize",a,!1)}));var v=function(){var e,t={1:"摊铺机",2:"压路机"},n=(e={},Object(o["a"])(e,"sbCodes[]",c.value.equipment),Object(o["a"])(e,"projectId",c.value.project),Object(o["a"])(e,"startTime",c.value.time[0]),Object(o["a"])(e,"endTime",c.value.time[1]),Object(o["a"])(e,"sbType",t[c.value.type]),e),r=null;s.reset(),G(n).then((function(e){if(0===e.code){var t=e.data,n=i.value.find((function(e){return e.code===c.value.equipment}));s.createMachine(c.value.equipment,n.type,c.value.argv),clearInterval(r);var l=0;r=setInterval((function(){var e=t[l];s.createPath({id:e.sb_code,lat:e.latitude,lng:e.longitude,temperature:e.temperature,speed:e.speed,vibrate:e.vibrate_max,stakemark:e.stakemark,evennumber:e.evennumber}),a.centerAndZoom({lat:e.latitude,lng:e.longitude},17),l++,l>t.length-1&&clearInterval(r)}),"normal"===c.value.mode?1e3:16)}}))};return{selectProjectList:n,searchParams:c,selectEquipment:i,machineList:l,f_search:v}}}),ae=te,se=(a("c05b"),Object(f["a"])(ae,U,ee,!1,null,"14e56b1f",null)),ne=se.exports,ie=Object(r["c"])({components:{Shigonghuifang:Q,Shigongjiankong:ne},setup:function(){}}),re=ie,ce=Object(f["a"])(re,n,i,!1,null,null,null),le=ce.exports,oe=a("2f62");s["default"].use(oe["a"]);var ue=new oe["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ve=a("5c96"),de=a.n(ve);a("0fae");s["default"].use(r["b"]),s["default"].use(de.a),s["default"].config.productionTip=!1,new s["default"]({store:ue,render:function(e){return e(le)}}).$mount("#app")},"79ba":function(e,t,a){var s=a("970b").default,n=a("5bc3").default,i=a("9523").default;a("159b"),a("99af"),a("a9e3"),a("b680");var r=a("f6d4"),c=new r(1,120,0,5e4,0),l=new Image;l.src=a("19d4");var o={tanpuji:l},u=function(){"use strict";function e(t){var a=this;s(this,e),i(this,"centerX",0),i(this,"centerY",0),i(this,"exX",0),i(this,"exY",0),i(this,"scale",.02),i(this,"machineMap",{}),i(this,"speedColorMap",["rgb(60,226,193)","rgb(239,86,45)"]),i(this,"vibrateColorMap",["#a675e0","#6e09e6"]),i(this,"temperatureColorMap",[{r:147,g:244,b:224},{r:60,g:226,b:193},{r:14,g:154,b:126},{r:11,g:123,b:101},{r:7,g:96,b:79},{r:4,g:68,b:55},{r:232,g:178,b:111},{r:216,g:149,b:66},{r:232,g:133,b:11},{r:228,g:93,b:41}]),i(this,"countColorMap",[{r:186,g:244,b:249},{r:41,g:213,b:20},{r:255,g:226,b:198},{r:255,g:173,b:152},{r:254,g:158,b:134},{r:133,g:120,b:120},{r:213,g:115,b:90},{r:255,g:68,b:61},{r:255,g:15,b:15},{r:199,g:41,b:0}]);var n=document.createElement("canvas");this.canvas=n,this.el=t,t.appendChild(n),this.ctx=n.getContext("2d"),window.addEventListener("resize",(function(){return a.resize()}),!1),this.resize(),this._bindDragEvent(),this._bindScaleEvent(),this._loop()}return n(e,[{key:"_loop",value:function(){var e,t,a,s,n=this,i=[];this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineCap="round";var r=function(r){var c=n.machineMap[r],l=n.ctx.getImageData(0,0,n.canvas.width,n.canvas.height),o=l.data,u=c.queue,v=void 0;u.forEach((function(r,l){var d=u[l-1],p=u[0];if(d){var m,h,f,b,_,g,C,x,y,M,j=parseInt(50*(r.x-(p.x-n.exX/50))),k=parseInt(50*(r.y-(p.y-n.exY/50))),w=parseInt(50*(d.x-(p.x-n.exX/50))),P=parseInt(50*(d.y-(p.y-n.exY/50))),q=j*n.scale+n.canvas.width/2,O=k*n.scale+n.canvas.height/2,E=w*n.scale+n.canvas.width/2,I=P*n.scale+n.canvas.height/2;if(e=q,t=O,a=E,s=I,l%5===0&&i.push({tag:"".concat(r.stakemark,"+").concat(parseInt(r.evennumber)),x:q+10,y:O}),m=Math.min(q,E),h=Math.min(O,I),f=Math.max(q,E),b=Math.max(O,I),_=f-m,g=b-h,0==_||0==g)return;if(f<=0||b<=0||m>=n.canvas.width||h>=n.canvas.height)return;var S=Math.ceil(Math.max(c.width*n.scale,4)/2);if(m-=S,h-=S,_+=2*S,g+=2*S,m>0&&f<n.canvas.width&&h>0&&b<n.canvas.height?(C=m,x=h,y=_,M=g):(C=m<0?0:m,x=h<0?0:h,y=f>n.canvas.width?n.canvas.width-C:_,M=b>n.canvas.height?n.canvas.height-x:g),C=parseInt(C),x=parseInt(x),y=parseInt(Math.max(y,0)),M=parseInt(Math.max(M,0)),0===y||0===M)return;if("speed"===c.argv)r.speed>10?n.ctx.strokeStyle=n.speedColorMap[1]:n.ctx.strokeStyle=n.speedColorMap[0];else if("temperature"===c.argv)if(r.temperature<100){var $=n.temperatureColorMap[0];n.ctx.strokeStyle="rgb(".concat($.r,", ").concat($.g,", ").concat($.b,")")}else if(r.temperature<110){var L=n.temperatureColorMap[1];n.ctx.strokeStyle="rgb(".concat(L.r,", ").concat(L.g,", ").concat(L.b,")")}else if(r.temperature<120){var T=n.temperatureColorMap[2];n.ctx.strokeStyle="rgb(".concat(T.r,", ").concat(T.g,", ").concat(T.b,")")}else if(r.temperature<130){var Y=n.temperatureColorMap[3];n.ctx.strokeStyle="rgb(".concat(Y.r,", ").concat(Y.g,", ").concat(Y.b,")")}else if(r.temperature<140){var X=n.temperatureColorMap[4];n.ctx.strokeStyle="rgb(".concat(X.r,", ").concat(X.g,", ").concat(X.b,")")}else if(r.temperature<150){var W=n.temperatureColorMap[5];n.ctx.strokeStyle="rgb(".concat(W.r,", ").concat(W.g,", ").concat(W.b,")")}else if(r.temperature<160){var z=n.temperatureColorMap[6];n.ctx.strokeStyle="rgb(".concat(z.r,", ").concat(z.g,", ").concat(z.b,")")}else if(r.temperature<170){var D=n.temperatureColorMap[7];n.ctx.strokeStyle="rgb(".concat(D.r,", ").concat(D.g,", ").concat(D.b,")")}else if(r.temperature<180){var A=n.temperatureColorMap[8];n.ctx.strokeStyle="rgb(".concat(A.r,", ").concat(A.g,", ").concat(A.b,")")}else{var F=n.temperatureColorMap[9];n.ctx.strokeStyle="rgb(".concat(F.r,", ").concat(F.g,", ").concat(F.b,")")}else n.ctx.strokeStyle="rgb(0,0,0)";if(n._renderPath(c,{x:q,y:O},{x:E,y:I}),"count"!=c.argv&&"vibrate"!=c.argv)return;try{n.ctx.getImageData(C,x,y,M)}catch(pe){console.log(C,x,y,M)}var J=n.ctx.getImageData(C,x,y,M),B=J.data;n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height);for(var N=x,Z=4*((x-1)*n.canvas.width+C),G=[Z],H=n.countColorMap[0],K=0;K<B.length;K+=4){var R=B[K],V=B[K+1],Q=B[K+2],U=B[K+3],ee=o[Z],te=o[Z+1],ae=o[Z+2],se=o[Z+3];if("count"===c.argv){if(255===U&&(!v||-1==v.indexOf(Z))&&0===R&&0===V&&0===Q){if(0===se)o[Z]=n.countColorMap[0].r,o[Z+1]=n.countColorMap[0].g,o[Z+2]=n.countColorMap[0].b,o[Z+3]=255;else for(var ne=0;ne<n.countColorMap.length;ne++){var ie=n.countColorMap[ne],re=n.countColorMap[ne+1];if(ie.r===ee&&ie.g===te&&ie.b===ae){o[Z]=re.r,o[Z+1]=re.g,o[Z+2]=re.b;break}}G.push(Z)}}else if(255===U&&r.vibrate>.5){for(var ce=!1,le=0;le<n.countColorMap.length;le++){var oe=n.countColorMap[le+1];if(n.countColorMap[le].r===ee&&n.countColorMap[le].g===te&&n.countColorMap[le].b===ae){H=oe,ce=!0;break}}if(ce)break}K/4%y===0&&0!==K?(x++,Z=4*((x-1)*n.canvas.width+C)):Z+=4}if("vibrate"===c.argv)for(var ue=4*((N-1)*n.canvas.width+C),ve=0;ve<B.length;ve+=4){B[ve],B[ve+1],B[ve+2];var de=B[ve+3];o[ue],o[ue+1],o[ue+2],o[ue+3];de&&(o[ue]=H.r,o[ue+1]=H.g,o[ue+2]=H.b,o[ue+3]=255),ve/4%y===0&&0!==ve?(N++,ue=4*((N-1)*n.canvas.width+C)):ue+=4}B=null,J=null,v=G}})),"count"!==c.argv&&"vibrate"!==c.argv||n.ctx.putImageData(l,0,0),o=null,l=null,i.forEach((function(e){var t=e.x,a=e.y,s=e.tag;n.ctx.lineWidth=1,n.ctx.fillStyle="red",n.ctx.font="bold 14px 微软雅黑",n.ctx.textBaseline="bottom",n.ctx.strokeStyle="rgba(255,255,255,.5)",n.ctx.textAlign="left",n.ctx.fillText(s,t,a),n.ctx.strokeText(s,t,a)})),n._renderMachine({type:c.type,x:e-c.width*n.scale/2,y:t,width:c.width*n.scale,sX:a,sY:s})};for(var c in this.machineMap)r(c);requestAnimationFrame((function(){return n._loop()}))}},{key:"resize",value:function(){this.canvas.width=this.el.offsetWidth,this.canvas.height=this.el.offsetHeight,this.originX=this.canvas.width,this.originY=this.canvas.height}},{key:"_crashDetPath",value:function(e,t,a,s){}},{key:"createMachine",value:function(e,t,a){this.machineMap[e]={width:100,type:t,queue:[],argv:a}}},{key:"_renderMachine",value:function(e){var t=e.width,a=e.x,s=e.y,n=(e.sX,e.sY,e.width/o.tanpuji.width*o.tanpuji.height);"摊铺机"===e.type&&this.ctx.drawImage(o.tanpuji,a,s,t,n)}},{key:"createPath",value:function(e){var t=this.machineMap[e.id];if(t){var a=t.queue;if(0===a.length||a[a.length-1].lat!==e.lat||a[a.length-1].lng!==e.lng){var s=c.JWgetGK(e.lng,e.lat);t.queue.push({lat:e.lat,lng:e.lng,x:s[1],y:s[0],temperature:e.temperature,speed:e.speed,vibrate:e.vibrate,stakemark:e.stakemark,evennumber:e.evennumber})}}}},{key:"_renderPath",value:function(e,t,a){this.ctx.beginPath(),this.ctx.moveTo(a.x,a.y),this.ctx.lineWidth=Math.max(e.width*this.scale,4),this.ctx.lineTo(t.x,t.y),this.ctx.stroke(),this.ctx.closePath()}},{key:"_bindDragEvent",value:function(){var e,t,a,s,n,i=this,r=function(r){a=r.x-n.x,s=r.y-n.y,i.exX=(a-e)/i.scale,i.exY=(s-t)/i.scale},c=function e(){document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",e,!1)},l=function(a){n=i.canvas.getBoundingClientRect(),e=a.x-n.x-i.exX*i.scale,t=a.y-n.y-i.exY*i.scale,document.addEventListener("mousemove",r),document.addEventListener("mouseup",c,!1)};this.canvas.addEventListener("mousedown",l,!1)}},{key:"_bindScaleEvent",value:function(){var e=this,t=function(t){t.preventDefault();var a=t.deltaY;a>0?e.scale=Number(Math.min(e.scale+.05,30).toFixed(1)):e.scale>.2?e.scale=Number(Math.max(.2,e.scale-.1).toFixed(1)):e.scale>.02&&e.scale<=.2?e.scale=Number(Math.max(.02,e.scale-.01).toFixed(2)):e.scale>.002&&e.scale<=.02&&(e.scale=Number(Math.max(.002,e.scale-.001).toFixed(3)))};this.canvas.addEventListener("wheel",t,!1)}},{key:"reset",value:function(){this.machineMap={},this.exX=0,this.exY=0}}]),e}();e.exports=u},"9a63":function(e,t,a){"use strict";a("fa8e")},b0d5:function(e,t,a){"use strict";a("c4c3")},b332:function(e,t,a){e.exports=a.p+"img/shebei3.a0a8b732.png"},bb03:function(e,t,a){"use strict";a("3149")},c05b:function(e,t,a){"use strict";a("0a56")},c4c3:function(e,t,a){},ca30:function(e,t,a){},ea29:function(e,t,a){},f6d4:function(e,t){e.exports=function(){var e,t,a,s,n,i,r,c,l,o;function u(u,d,p,m,h){0==u?(e=6378245,t=6356863.0188):1==u&&(e=6378140,t=6356755.2882),2==u&&(e=6378137,t=6356752.3142),3==u&&(e=6378137,t=6356752.31414),a=(e-t)/e,s=Math.sqrt(2*a-v(a,2)),n=s/Math.sqrt(1-v(s,2)),c=d,l=p,o=1,i=m,r=h}var v=function(e,t){return Math.pow(e,t)};return u.prototype.JWgetGK=function(a,o){var u,d,p,m,h,f=[],b=(o-l)*Math.PI/180,_=(a-c)*Math.PI/180,g=e/Math.sqrt(1-v(s*Math.sin(b),2)),C=v(e,2)/t;u=1-3*v(n,2)/4+45*v(n,4)/64-175*v(n,6)/256+11025*v(n,8)/16384,d=u-1,p=15/32*v(n,4)-175/384*v(n,6)+3675/8192*v(n,8),m=0-35/96*v(n,6)+735/2048*v(n,8),h=315/1024*v(n,8);var x=C*(u*b+Math.sin(b)*(d*Math.cos(b)+p*v(Math.cos(b),3)+m*v(Math.cos(b),5)+h*v(Math.cos(b),7))),y=Math.tan(b),M=n*Math.cos(b),j=x+v(_,2)/2*g*Math.sin(b)*Math.cos(b)+v(_,4)*g*Math.sin(b)*v(Math.cos(b),3)/24*(5-v(y,2)+9*v(M,2)+4*v(M,4))+v(_,6)*g*Math.sin(b)*v(Math.cos(b),5)*(61-58*v(y,2)+v(y,4))/720,k=_*g*Math.cos(b)+v(_,3)*g/6*v(Math.cos(b),3)*(1-v(y,2)+v(M,2))+v(_,5)*g/120*v(Math.cos(b),5)*(5-18*v(y,2)+v(y,4)+14*v(M,2)-58*v(M,2)*v(y,2));return f[0]=k+i,f[1]=j+r,f},u.prototype.GKgetJW=function(t,a){var u=[],d=(1-Math.sqrt(1-v(s,2)))/(1+Math.sqrt(1-v(s,2))),p=(a-r)/o,m=p/(e*(1-v(s,2)/4-3*v(s,4)/64-5*v(s,6)/256)),h=m+(3*d/2-27*v(d,3)/32)*Math.sin(2*m)+(21*v(d,2)/16-55*v(d,4)/32)*Math.sin(4*m)+151*v(d,3)/96*Math.sin(6*m)+1097/512*v(d,4)*Math.sin(8*m),f=e*(1-v(s,2))/Math.sqrt(v(1-v(s*Math.sin(h),2),3)),b=e/Math.sqrt(1-v(s*Math.sin(h),2)),_=v(Math.tan(h),2),g=(t-i)/(o*b),C=v(n,2)*v(Math.cos(h),2),x=h-b*Math.tan(h)/f*(v(g,2)/2-(5+3*_+10*C-9*_*C-4*v(C,2)-9*v(n,2))*v(g,4)/24+(61+90*_+45*v(_,2)-256*v(n,2)-3*v(C,2))*v(g,6)/720),y=c*Math.PI/180+1/Math.cos(h)*(g-(1+2*_+C)*v(g,3)/6+(5-2*C+28*_-3*v(C,2)+8*v(n,2)+24*v(_,2))*v(g,5)/120),M=180*x/Math.PI,j=180*y/Math.PI;return u[0]=j,u[1]=M+l,u},u}()},fa8e:function(e,t,a){}});